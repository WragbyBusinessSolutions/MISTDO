@model AppViewModel
@{
    Layout = "_LayoutDashboard";
    ViewData["Title"] = "Modules";
}
@inject UserManager<ApplicationUser> userManager;
@{
    var user = await userManager.GetUserAsync(User);

}

<div class="page-container">
    <!-- Header START -->
    @await Html.PartialAsync("_LayoutHeader");

    <!-- Theme Toggle Button END -->
    <!-- Content Wrapper START -->
    <div class="main-content">
        <div class="container-fluid">
            <div class="page-title">
                <h4>Select The Training Module</h4>
                <p>
                    <a class="btn btn-success" asp-action="Modules">Back</a>
                </p>

            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-block">
                            <form asp-action="UploadLogo" enctype="multipart/form-data">
                                <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                                <div class="form-group">
                                    <label>Company Logo </label><label style="color:crimson"> ( Select Your File To Upload Logo)</label>
                                    <div class="col-4" align="center">

                                        <span align="center"><iframe id="ImagePreview" src="~/templates/avatar.png" scrolling="auto" allowtransparency="true" allowfullscreen></iframe></span>


                                    </div>

                                    <div class="col-4" align="center">

                                        <span><input type="file" asp-for="ImageUpload" class="btn btn-success" name="ImageUpload" multiple="multiple" onchange="ShowPreview(this)" /></span>

                                        <div id="result" align="center"></div>
                                        <hr />
                                    </div>
                                </div>
                                <div class="form-group" align="center">
                                    <input type="submit" value="Upload" class="btn btn-success" />
                                </div>
                            </form>
                        </div>



                    </div>

                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-heading border bottom">
                            @if (user.ImageUpload != null)
                            {
                                <div class="widget-profile-1 card">
                                    <div class="profile border bottom">
                                        <p>
                                            <center>
                                                <a class="btn btn-success" href="#" style="min-width:40%;  background-color: #0b9242; color: white;">STEP 2</a>| <a class="btn btn-success" style="min-width:40%;" asp-action="EditProfile">Upload Profile Picture</a>
                                            </center>
                                        </p>
                                        <p> <label class="mrg-top-30">Profile Picture</label></p>
                                        <img class="mrg-top-30" src="@String.Format("data:image/gif;base64,{0}", Convert.ToBase64String(user.ImageUpload))" alt="Take a new Passport" height="150" width="180" onload="move()">
                                        <p> <label class="mrg-top-30"> NB: Your company logo appears on certificate generated by you </label></p>
                                    </div>

                                </div>
                            }
                            else
                            {
                                <div class="widget-profile-1 card">
                                    <div class="profile border bottom">
                                        <img class="mrg-top-30" src="~/templates/avatar.png" alt="Take a new Passport" height="150" width="180">
                                        <p>
                                            <h4 class="mrg-top-20 no-mrg-btm text-semibold"> <a>Upload your Company Logo  </a> </h4>
                                        </p>
                                        <p> <label class="mrg-top-30"> NB: Your company logo appears on certificate generated by you </label></p>
                                    </div>

                                </div>
                            }




                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Content Wrapper END -->
    <!-- Footer START -->
    @await Html.PartialAsync("_Footer")
    <!-- Footer END -->
    <!-- Page Container END -->
</div>

<script type="text/javascript">
    function ShowPreview(input) {
        if (input.files && input.files[0]) {
            var ImageDir = new FileReader();
            ImageDir.onload = function (e) {
                $('#ImagePreview').attr('src', e.target.result);
            }
            ImageDir.readAsDataURL(input.files[0]);
        }
    }
</script>
